<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.doug.ssm.dao.ExperimentDao">
    <select id="queryExperimentsBy" resultType="com.doug.ssm.entity.Experiment">
        SELECT experiment_id, experiment_name, experiment_time, experiment_place, capacity,
        teacher_id, selected_number
        FROM experiment WHERE teacher_id = #{teacherId}
    </select>
    <select id="queryExperimentBy" resultType="com.doug.ssm.entity.Experiment">
         SELECT experiment_id, experiment_name, experiment_time, experiment_place, capacity,
         teacher_id, selected_number
         FROM experiment WHERE experiment_id = #{experimentId}
    </select>
    <select id="queryMaxExperimentId" resultType="Integer">
        SELECT experiment_id FROM experiment ORDER BY experiment_id DESC LIMIT 1
    </select>
    <select id="queryAllExperiments" resultType="com.doug.ssm.entity.Experiment">
         SELECT experiment_id, experiment_name, experiment_time, experiment_place, capacity,
         teacher_id, selected_number
         FROM experiment
    </select>
    <update id="updateExperiment" parameterType="com.doug.ssm.entity.Experiment">
        UPDATE experiment
        SET experiment_name = #{experimentName},
        experiment_time = #{experimentTime},
        experiment_place = #{experimentPlace},
        capacity = #{capacity},
        teacher_id = #{teacherId}
        WHERE experiment_id = #{experimentId}
    </update>
    <update id="experimentSelectedNumberPlusOne">
        UPDATE experiment
        SET selected_number = selected_number + 1
        WHERE experiment_id = #{experimentId}
    </update>
    <update id="experimentSelectedNumberReduceOne">
        UPDATE experiment
        SET selected_number = selected_number - 1
        WHERE experiment_id = #{experimentId}
    </update>
    <insert id="insertExperiment" parameterType="com.doug.ssm.entity.Experiment">
        INSERT experiment (experiment_name, experiment_time, experiment_place
        , capacity, teacher_id, selected_number)
        VALUES
        (#{experimentName}, #{experimentTime}, #{experimentPlace}, #{capacity}
        , #{teacherId}, #{selectedNumber})
    </insert>
    <delete id="deleteExperimentBy">
        DELETE FROM experiment WHERE experiment_id = #{experimentId}
    </delete>
</mapper>